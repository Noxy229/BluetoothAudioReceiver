<Window x:Class="BluetoothAudioReceiver.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Einstellungen" 
        Height="480" Width="420"
        WindowStartupLocation="CenterOwner"
        WindowStyle="None"
        AllowsTransparency="True"
        ResizeMode="NoResize"
        Background="Transparent">
    
    <Border Background="{StaticResource BackgroundBrush}" 
            BorderBrush="{StaticResource BorderBrush}" 
            BorderThickness="1" 
            CornerRadius="12">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="44"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>
            
            <!-- Custom Title Bar -->
            <Border Background="{StaticResource SurfaceBrush}" 
                    CornerRadius="12,12,0,0"
                    MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                <Grid>
                    <StackPanel Orientation="Horizontal" Margin="14,0,0,0" VerticalAlignment="Center">
                        <TextBlock Text="⚙️" FontSize="14" Margin="0,0,8,0"/>
                        <TextBlock Text="Einstellungen" 
                                   FontSize="13" 
                                   FontWeight="SemiBold"
                                   Foreground="{StaticResource TextPrimaryBrush}"/>
                    </StackPanel>
                    
                    <Button Content="✕" 
                            Click="CancelButton_Click"
                            Style="{StaticResource CloseButtonStyle}"
                            HorizontalAlignment="Right"
                            FontSize="11"
                            Foreground="{StaticResource TextSecondaryBrush}"
                            ToolTip="Schließen"
                            AutomationProperties.Name="Schließen"/>
                </Grid>
            </Border>
            
            <!-- Settings Content -->
            <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" Padding="20,16,20,0">
                <StackPanel>
                    
                    <!-- Volume Section -->
                    <TextBlock x:Name="VolumeHeader" Text="VOLUME" Style="{StaticResource SectionHeaderStyle}"/>
                    <Border Style="{StaticResource CardStyle}" Margin="0,0,0,16">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="50"/>
                            </Grid.ColumnDefinitions>
                            
                            <Slider x:Name="VolumeSlider" 
                                    Style="{StaticResource ModernSliderStyle}"
                                    Minimum="0" 
                                    Maximum="100" 
                                    Value="{Binding Volume}"
                                    VerticalAlignment="Center"/>
                            
                            <TextBlock Grid.Column="1" 
                                       Text="{Binding Volume, StringFormat={}{0}%}"
                                       FontSize="13"
                                       FontWeight="SemiBold"
                                       Foreground="{StaticResource TextPrimaryBrush}"
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Right"/>
                        </Grid>
                    </Border>
                    
                    <!-- Startup Section -->
                    <TextBlock x:Name="AutostartHeader" Text="AUTOSTART" Style="{StaticResource SectionHeaderStyle}"/>
                    <Border Style="{StaticResource CardStyle}" Margin="0,0,0,16">
                        <StackPanel>
                            <CheckBox x:Name="AutoStartCheckBox" 
                                      Content="Start with Windows"
                                      IsChecked="{Binding AutoStart}"
                                      Style="{StaticResource ToggleSwitchStyle}"
                                      Margin="0,0,0,14"/>
                            
                            <CheckBox x:Name="StartMinimizedCheckBox" 
                                      Content="Start minimized"
                                      IsChecked="{Binding StartMinimized}"
                                      IsEnabled="{Binding AutoStart}"
                                      Style="{StaticResource ToggleSwitchStyle}"/>
                        </StackPanel>
                    </Border>
                    
                    <!-- Behavior Section -->
                    <TextBlock x:Name="BehaviorHeader" Text="BEHAVIOR" Style="{StaticResource SectionHeaderStyle}"/>
                    <Border Style="{StaticResource CardStyle}" Margin="0,0,0,16">
                        <StackPanel>
                            <CheckBox x:Name="MinimizeToTrayCheckBox" 
                                      Content="Minimize to system tray"
                                      IsChecked="{Binding MinimizeToTray}"
                                      Style="{StaticResource ToggleSwitchStyle}"
                                      Margin="0,0,0,14"/>
                            
                            <CheckBox x:Name="AutoConnectCheckBox" 
                                      Content="Auto-connect"
                                      IsChecked="{Binding AutoConnect}"
                                      Style="{StaticResource ToggleSwitchStyle}"
                                      Margin="0,0,0,14"/>
                            
                            <CheckBox x:Name="ShowNotificationsCheckBox" 
                                      Content="Show notifications"
                                      IsChecked="{Binding ShowNotifications}"
                                      Style="{StaticResource ToggleSwitchStyle}"/>
                        </StackPanel>
                    </Border>
                    
                    <!-- Language Section -->
                    <TextBlock x:Name="LanguageHeader" Text="LANGUAGE" Style="{StaticResource SectionHeaderStyle}"/>
                    <Border Style="{StaticResource CardStyle}" Margin="0,0,0,16">
                        <ComboBox x:Name="LanguageComboBox"
                                  SelectionChanged="LanguageComboBox_SelectionChanged"
                                  DisplayMemberPath="Value"
                                  SelectedValuePath="Key"
                                  SelectedValue="{Binding Language}"
                                  FontSize="13"/>
                    </Border>
                    
                </StackPanel>
            </ScrollViewer>
            
            <!-- Buttons -->
            <Border Grid.Row="2" 
                    Background="{StaticResource SurfaceBrush}" 
                    CornerRadius="0,0,12,12"
                    Padding="20,16">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="8"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    
                    <Button x:Name="CancelButton"
                            Content="Cancel" 
                            Click="CancelButton_Click"
                            Style="{StaticResource SecondaryButtonStyle}"/>
                    
                    <Button x:Name="SaveButton"
                            Grid.Column="2"
                            Content="Save" 
                            Click="SaveButton_Click"
                            Style="{StaticResource PrimaryButtonStyle}"/>
                </Grid>
            </Border>
        </Grid>
    </Border>
</Window>
